---
title: "クライアント側のセキュリティ"
emoji: "✅"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["学習記録"]
published: true
---

# 暗号化
- 2025年現在、安全とされている方式は電子政府推奨のAES（鍵長256ビット）、CCのEAL4レベルです

### CCのEAL
- CC（Common Criteria）におけるEAL4とは、製品のセキュリティ機能が設計・実装・テスト・開発管理を含めて体系的に評価・検証されたレベルを意味します
- ISO/IEC 15408に基づいて、IT製品のセキュリティ機能を第三者が評価する国際標準です
- EALは「機能の強さ」ではなく「保証の深さ」です

| レベル      | 概要                   |
| -------- | -------------------- |
| EAL1     | 機能テスト中心              |
| EAL2〜3   | 設計書確認レベル             |
| EAL4 | 実用環境で十分な設計・検証がなされた水準 |
| EAL5〜7   | 高度な攻撃耐性（軍事・高度機密用途）   |


## フルディスク暗号化方式
- ディスクを丸ごと暗号化します（BitLocker等）
- 利用者が意識することなく、自動的に暗号化します
- OSが起動する前に、認証通らないと起動できません（**プリブート認証**といいます）
- PCが休止モードになった時に、メモリの内容を一時的に書き出すハイバーネーション用領域も暗号化される場合が一般的です

### ハイバーネーション（Hibernate）
- コンピュータの現在のメモリ内容を補助記憶装置（HDD/SSD）に保存し、電源を完全に切った状態から復元できる省電力機能です
- メモリ（RAM）の内容、暗号鍵、未保存文書などをファイルとしてディスクに保存します
- 電源を完全にオフします
- 再起動時に保存ファイルを読み込み、作業状態を復元します
- スリープとの違いは「電源が完全に切れる」点です

:::message
ディスクを暗号化していない場合、メモリ上に存在していた機密情報がハイバーネーションによりディスクへ保存されるため、媒体盗難時に情報漏えいのリスクが高まります
:::

## 仮想ディスク暗号化方式
- 仮想的な暗号化領域を作成し、それを仮想ディスクとして利用する方式です
- マウントする時などに認証が必要ですが、いったん認証をパスすると、一定の時間は意識せずに普通に使えます
- 仮想ディスクに書き込むと自動で暗号化され、仮想ディスク以外のところにコピーすると自動で復号されます

## フォルダ・ファイル暗号化方式
- 暗号化したいフォルダやファイルに対して暗号化する方式です

# エンドポイント
エンドポイントとは、モバイル端末、サーバ、スマートフォンなどのエンドポイントです

## EPP(Endpoint Protection Platform)
- エンドポイントを守るための対策の総称です
- マルウェア対策が基本になるので、各種アンチウイルスソフトがメインになります

### 主な機能
- ウイルス対策
- 挙動検知（簡易）
- 不正プログラムの実行防止
- デバイス制御

### 特徴
- 既知の脅威対策が中心
- 境界防御の延長線
- 「感染させない」ことが主目的

## EDR(Endpoint Detection and Response)
- エンドポイントの操作や動作の監視を行い、サイバー攻撃を受けたことを発見し次第対処するソリューションです

### 主な機能
- プロセス・通信・レジストリ変更の常時監視
- 攻撃の可視化（タイムライン分析）
- 端末隔離などの対応機能

### 特徴
- 標的型攻撃や未知マルウェア対策
- SOCやSIEMと連携
- 「侵入前提」の対策

:::message
SIEM（Security Information and Event Management）：複数機器のログを収集・統合・相関分析し、インシデントを検知するシステムです
SOC（Security Operation Center）：セキュリティ監視・分析・対応を行う専門組織・運用体制です
:::

# EMM (Enterprise Mobility Management)
- PC、スマトフォンなどの端末をリモートで集中管理する統合システムです
- BYOD、テレワーク拡大、クラウドサービス利用増加により、モバイル端末の紛失・不正利用・情報漏えい対策が必要です

## 構成要素
### MDM（Mobile Device Management）
- 端末管理
- 端末ロック
- リモートワイプ（遠隔初期化）
- OSアップデート管理

### MAM（Mobile Application Management）
- 業務アプリの制御
- コピー＆ペースト制限
- アプリ単位のデータ制御

### MCM（Mobile Content Management）
- 文書データの管理
- 暗号化保存
- アクセス制御

### その他機能
- 資産管理：HW,OS、アプリケーションなどの情報を自動収集する機能
- 遠隔操作：
    - 管理ポリシーの適用や設定ファイルの送信で、デバイスの設定を一元的に集中管理する
    - カメラの起動や禁止などのデバイスを制御する機能
    - リモートロック、リモートワイプ（消去）。操作不可になったり、初期化したりする機能

# BYOD (Bring Your Own Device)
- 個人持ちのPCや端末を会社業務に利用しようとすることです

### メリット
- 会社にとっては、初期コストや運用コストがかかりません
- 従業員にとって、使い慣れ端末が利用できます
- 特定機種に脆弱性が発見されても、すべての端末が使えなくなることはないです

### デメリット
- 会社での一元管理が困難です
- 脆弱性の一括修正が困難です
- 私的データと業務データが混在します

### 課題と注意点
- BYODの利用規定を作成します
- OS及びアプリケーションに最新の脆弱性対策パッチを適用します
- 従業員個人所有携帯端末の機種とOSバージョンの申請を義務付けます→従業員に対する脆弱性情報の提供と指導が目的
- 可能であれば、ウイルス対策ソフトを導入します
- 私的改造を行いません→製造元のセキュリティ機能が無効になるから
- アプリケーションは、信頼できるところからだけに限定します
- 機密情報にはアクセスされないなど、セキュリティレベルに応じて認可対象を決めます

# TPM（Trusted Platform Module）
- 暗号鍵の生成・保管・利用を安全に行うためのハードウェアセキュリティモジュール（HSMの一種）です
- PCなどに内蔵される（マザーボードに取り付けられている）セキュリティチップです
- 耐タンパ性を持ちます
- TPMにより端末固有の秘密鍵を安全に保持し、その鍵を用いた電子署名により端末認証を行います

:::message
HSM(Hardware Security Module)：TPMが**端末単位**であるのに対し、HSMはネットワーク上に設置される専用装置として、システム全体で大量の鍵や署名処理を安全に提供・管理します
:::

## 目的
- 暗号鍵の安全な保管
- ブート時の改ざん検知
- デバイスの真正性保証（正規のもの、改ざんされていない状態）

## 主な機能
### 鍵生成・格納
- 鍵をTPM内部で生成
- 外部に平文で出さない

### セキュアブート支援
- 起動時にBIOSやOSのハッシュ値を記録
- 改ざんがあれば検知

### リモート認証（Attestation）
- 端末状態の証明

### 典型的な利用例
- クライアント証明書の秘密鍵保管
- VPN接続時の端末認証
- ゼロトラスト環境でのデバイス認証
- フルディスク暗号方式で復号鍵を保管する
    - ハードディスクが取り外され持ち出されても、他のPCで読むことはできません。逆に、マザーボードが交換されたらディスク内のデータが読めなくなりました

# Secure Web Gateway（SWG）
利用者のWebアクセス（HTTP/HTTPS通信）を中継・検査し、不正サイトへの接続やマルウェア感染を防止するセキュリティ機能です

## 目的
- 不正Webサイトへのアクセス防止
- マルウェア配布サイト遮断
- 情報漏えい防止
- 業務外サイトの制御


## 主な機能
### URLフィルタリング
- カテゴリ別制御
- ブラックリスト／ホワイトリスト
### アンチウイルス
- ダウンロードファイルのマルウェア検査
- サンドボックスでの実行から検知
- ウイルスの検知・隔離・駆除
### RBI (Remote Browser Isolation)
- 端末からWebサイトへのアクセスを中継し、そのコンテンツ中に危険な要素があれば、無効化して安全な部分だけ再生成し端末に送る

### SSL/TLS復号検査（SSLインスペクション）
- HTTPS通信を一旦復号し検査
### DLP (Data Loss Prevention)
- 機密情報の外部送信制御

## 他技術との違い

| 技術      | 主対象        |
| ------- | ---------- |
| FW      | IP/ポート制御   |
| IDS/IPS | 攻撃パターン検知   |
| SWG     | Web通信内容の検査 |

# シンクライアント
クライアント端末に必要最小限の機能しか持たせないシンクライアントを利用するにして、セキュリティ強化します

## 画面転送型（リモートデスクトップ型）
### 仕組み
- OS・アプリはサーバ側で実行
- 端末には画面情報のみ転送
- 入力情報をサーバへ送信

### 特徴
- 端末にデータ保存しない
- 管理が集中化
- サーバ依存度が高い

### セキュリティ面
- データ漏えいリスク低減
- 通信経路の暗号化が必須

### 運用例
- VDI(Virtual Desktop Infrastructure)
- RDP方式

## ネットワークブート型
### 仕組み
- 端末起動時にネットワーク経由でOSを取得
- OSは端末上で実行
- データ保存はサーバ側

### 特徴
- OSは毎回ネットワークから配布
- 端末にローカルディスクを持たない構成が多い
- サーバ負荷は画面転送型より小さい

### セキュリティ面
- ローカルにデータを残しにくい
- 端末上で処理実行される

### 運用例
- PXEブート方式

## 比較
| 項目     | 画面転送型    | ネットワークブート型 |
| ------ | -------- | ---------- |
| OS実行場所 | サーバ      | 端末         |
| データ保存  | サーバ      | サーバ        |
| 通信量    | 多い（画面転送） | 少なめ        |
| 管理集中度  | 高い       | やや低い       |
