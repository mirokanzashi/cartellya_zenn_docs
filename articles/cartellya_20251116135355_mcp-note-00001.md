---
title: "初心者のMCPお試しノート #1 – MCPを体験する"
emoji: "✅"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["MCP"]
published: true
---

# はじめに

MCPの勉強を始めて、本の内容を実際に動かしてみました。

勉強している本
https://www.amazon.co.jp/MCP%E5%85%A5%E9%96%80%E2%80%95%E2%80%95%E7%94%9F%E6%88%90AI%E3%82%A2%E3%83%97%E3%83%AA%E6%9C%AC%E6%A0%BC%E9%96%8B%E7%99%BA-%E5%B0%8F%E9%87%8E-%E5%93%B2/dp/4297152959

# 環境構築と設定

### Node.jsのインストール

1. 公式サイトのダウンロードページにアクセスする：https://nodejs.org/en/download/current
2. 緑色ボタン（Windows Install (.msi)）をクリックして、最新安定版をダウンロードする
3. ダブルクリックでインストールを開始する
4. インストール完了後、コマンドプロンプトで　コマンドを実行する `node -v`
5. `v25.2.0`のような内容が表示される（数字はダウンロードするバージョンにより異なる場合ある）

:::message
**node は内部コマンドまたは外部コマンド...** のような内容が表示される場合は、環境パスがうまく設定されてない可能性があります。
node環境パスの設定方法はgoogleで検索、もしくはChatGPTなどに聞くと答えが出るので割愛します
設定完了後、すべてのコマンドプロンプトを開き直して、再度`node -v`を試します

:::

### Claude Desktopのインストール
1. ダウンロード先：https://claude.com/download
2. Claude Desktopを起動する
3. アカウント：Googleアカウントを使う。もしくはメールアドレスでアカウントを作る
4. 色んな質問があるだが、適当に選ぶ、もしくは飛ばす
5. 最終的には画像の画面に辿り着く

![](/images/mcp_note/00001.png)

6. 左下のアイコンをクリックすると、表示言語を変更できる箇所が表示される

### 作業フォルダ作成
気に入った場所で、下記の構造のフォルダを作成する（フォルダ名は任意）
※ここは`C:\mcp`を例にします

```
mcp
 |- ch01

```

### 作業必要なファイル作成
先ほど作成したフォルダ`mcp/ch01`に、下記のファイルを作成する

- test1.txt

```
テストファイル１です
```

- test2.txt

```
テストファイル２です
```

- サブフォルダを作成する（フォルダ名：サブフォルダ）

- サブフォルダの配下にファイル(test3.txt)を作成する

```
サブフォルダの中身、テストファイル３です
```

全部作成後の構造

```
mcp
 |- ch01
      |- サブフォルダ
            |- test3.txt
      |- test1.txt
      |- test2.txxt
```


### clude desktopの設定ファイル編集
`%APPDATA%\Claude\claude_desktop_config.json`

編集後の内容

```
{
  "mcpServers":{
    "filesystem":{
      "command":"npx",
      "args":[
        "-y",
        "@modelcontextprotocol/server-filesystem",
        "C:\\mcp\\ch01"
      ]
    }
  }
}
```

もし、configファイルの中に空ではない場合、例えば

```
{
  "preferences": {
    "menuBarEnabled": true
  }
}
```

この場合に、第一階層の最後に追加します。
上のオブジェクトの最後、`,` カンマが必要であれば追加します

```
{
  "preferences": {
    "menuBarEnabled": true
  },
  "mcpServers":{
    "filesystem":{
      "command":"npx",
      "args":[
        "-y",
        "@modelcontextprotocol/server-filesystem",
        "C:\\mcp\\ch01"
      ]
    }
  }
}
```


:::message
ファイルパス：先ほど作成したch01のパスです
注意事項：windowsの場合、パスは`\\`を使ってください

:::

設定完了後、`ファイル→終了`でClaude Desktopを再起動して、変更した設定を反映させます


# MCP体験

コードの置き場
https://github.com/mirokanzashi/Practice/tree/master/mcp

## 基本実験
### ファイル一覧表示
プロンプト：現在のディレクトリの中身を教えて
結果

![](/images/mcp_note/00002.png)

:::message
同じ結果ならない場合があります。実際この結果と本が記載した結果が異なります。

:::

ここで、何か起こしたというと

- プロンプトの日本語をAIが理解
- 「ディレクトリの中身を教えて」→ filesystemツールが必要と判断
- MCPサーバーにツール実行を依頼
- 結果を受け取って日本語で説明

### ファイル操作
下記の３つのプロンプトを実行します

- `test1.txtの中身を教えて`
- `「今日の学習記録.txt」というファイルを作って、「MCPの体験を開始しました。とても面白いです」と書いて`
- `フォルダの中にあるすべてのtxtファイルを読んで、内容をまとめて「まとめレポート.txt」を作って`

この３つのプロンプトをAIに指示するファイル操作は、読み込み、書き込み、複数ファイルの読み込み+書き込みです

実際の処理を抽象化にすると、
- プロンプトの日本語をAIが理解
- 必要なツールを選択（ここはfilesystem）して、MCPサーバーに依頼
- ファイルの順次処理
- 結果を日本語でまとめて

## 日常タスク

### CSVデータ分析
`日常タスク\売上データ.csv`を読んで、商品名別の売上集計と日別の売上推移をまとめて「売上レポート.txt」を作って

### テーブルをmarkdown形式に変換
`日常タスク\商品マスタ.csv`を読んで、その内容をテーブル形式を維持するままでmarkdown形式に変換して「商品マスタ.md」に出力する

### json整形
`日常タスク\unformatted.json`を読んで、indent=2と改行を入れて、中身を整形して、「formatted.json」に出力する

### コマンド付きコードの文書化
`日常タスク\dateutils`を読んで、関数の説明とコメントをまとめて「関数説明書.md」を作って

### 文書翻訳
`日常タスク\MCP_en.md`を読んで、技術用語はそのままで自然な日本語に翻訳した「MCP_jp.md」を作って

※ MCP_en.mdの内容は [Code execution with MCP: Building more efficient agents](https://www.anthropic.com/engineering/code-execution-with-mcp) より抜粋

### ログ解析と改善提案
`日常タスク\app.log`を分析して、エラーパターンを見つけて、解決策付きの「改善提案書.md」を作って

## まとめ
1. MCPの基礎は本の内容を実際に動かして理解します
2. MCPはどのようなものを実際に動かして理解します
3. MCPはいろんなことができることを理解します
4. ローカル操作を除けば、内容の解析や提案はChatGPTでも可能である。では、MCPを使う場合とは何が違うか